{% extends "template.html" %}

{% block content %}
{% from "security/_macros.html" import render_field_with_errors %}
<div class="ui middle aligned center aligned grid" style="padding-top: 80px;">
    <div class="column" style="max-width: 450px;">
        <h2 class="ui teal image header">
            Create a new account
        </h2>

        {% include "security/_messages.html" %}

        <form action="{{ url_for_security('register') }}" method="POST" name="register_user_form" class="ui large form {% if register_user_form.errors|length > 0 %} {{ 'error' }} {% endif %}">
            {{ register_user_form.hidden_tag() }}

            <div class="ui stacked segment">
                {{ render_field_with_errors(register_user_form.email, 'mail outline') }}
                {{ render_field_with_errors(register_user_form.first_name, 'user') }}
                {{ render_field_with_errors(register_user_form.last_name, 'user') }}
                {{ render_field_with_errors(register_user_form.password, 'lock') }}
                {{ render_field_with_errors(register_user_form.password_confirm, 'lock') }}

                {% if register_user_form.errors|length > 0 %}
                <div class="ui error message">
                    <ul class="list">
                        {% for key, value in register_user_form.errors.iteritems() %}
                        <li>
                            {{ value[0]|e }}
                        </li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
                <button id="submit" class="ui fluid large teal submit button" name="submit" type="submit"> Register </button>
            </div>
        </form>

        {% include "security/_menu.html" %}
    </div>
</div>
{% endblock %}